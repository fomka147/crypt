import random

# Словарь для шифрования
encryption_dict = {
    'а': ['0010100100', '0011110001', '1100110010'],
    'б': ['0101101100', '1100100101', '0110010010'],
    'в': ['0111001000', '1101111000', '0001111110'],
    'г': ['1000000000', '0100010100', '1011101001'],
    'д': ['0001010110', '1101110100', '1101100100'],
    'е': ['1000001101', '0110110111', '0010110001'],
    'ё': ['1011111010', '1001010011', '1001000001'],
    'ж': ['1001101001', '0110001111', '1111000100'],
    'з': ['1110110110', '0000000110', '1111100001'],
    'и': ['0010001101', '1111100010', '1100000100'],
    'й': ['1001100010', '1001000111', '1101000000'],
    'к': ['0100011011', '1010100100', '0001111101'],
    'л': ['1010001101', '1110011001', '0001000011'],
    'м': ['0010010001', '0000010110', '0001100110'],
    'н': ['0110000110', '0110000101', '1100110111'],
    'о': ['0101111100', '1111011011', '0010111100'],
    'п': ['0000011000', '0101010111', '1110011000'],
    'р': ['0010010101', '1111110110', '1111111000'],
    'с': ['0010000101', '0011101100', '1000011011'],
    'т': ['0110101000', '0110000111', '0111101001'],
    'у': ['0100011000', '0110000100', '1101000010'],
    'ф': ['1011100100', '0001000101', '1010100010'],
    'х': ['0110001001', '0010011111', '1110101001'],
    'ц': ['0101111001', '1111100101', '1100110011'],
    'ч': ['0011100000', '1101001111', '1101010011'],
    'ш': ['0000100101', '1001111101', '0100001110'],
    'щ': ['0000011001', '0011111110', '0010000000'],
    'ъ': ['0111101110', '1100100000', '0100000110'],
    'ы': ['0001011110', '1000000100', '0110011001'],
    'ь': ['0100100000', '0111011010', '0101000110'],
    'э': ['1100111010', '0000010001', '1101010100'],
    'ю': ['0100101100', '1101000111', '0001111111'],
    'я': ['1011110010', '0110011110', '1001011011'],
    'a': ['1101111100', '1001110001', '1000011101'],
    'b': ['0000101111', '0011101001', '0011011110'],
    'c': ['0000111101', '0100011001', '0010000011'],
    'd': ['0011100111', '1001001010', '1110101011'],
    'e': ['0000010101', '0000000100', '1100001010'],
    'f': ['1010100000', '1010110100', '0010011000'],
    'g': ['0100111000', '0001001001', '1110100010'],
    'h': ['1010101101', '1001110011', '1010011010'],
    'i': ['1101001001', '1000110011', '0111101000'],
    'j': ['0000001101', '1100100110', '1000101101'],
    'k': ['1001100000', '1100000000', '0111000110'],
    'l': ['1010000110', '0101110111', '0100111100'],
    'm': ['1100000101', '0000000000', '1011000111'],
    'n': ['0011010111', '1100010110', '0101000011'],
    'o': ['0011100100', '0001001000', '0001011010'],
    'p': ['1110010010', '0100100100', '1000011111'],
    'q': ['1000110000', '1110101101', '0111110000'],
    'r': ['0011100110', '0111000010', '1101111010'],
    's': ['1011110001', '0010000100', '0100101110'],
    't': ['0001110101', '1100100011', '1010001001'],
    'u': ['0001001010', '0000110000', '1001010001'],
    'v': ['0000000111', '1110000101', '1011010001'],
    'w': ['0101100010', '0111001001', '0011001101'],
    'x': ['1000010010', '1111001001', '1000101111'],
    'y': ['1110000001', '1001000110', '0010001111'],
    'z': ['0001010001', '1100100111', '0100110101']
}

# Создаем обратный словарь для дешифровки
decryption_dict = {value: key for key, values in encryption_dict.items() for value in values}


def encrypt(word):
    encrypted_word = ''
    for letter in word:
        if letter.lower() in encryption_dict:
            key_options = encryption_dict[letter.lower()]
            selected_key = random.choice(key_options)
            encrypted_word += selected_key
        else:
            encrypted_word += letter
    return encrypted_word.replace(" ", "")


def decrypt(word):
    decrypted_word = ''
    while word:
        found_match = False
        for value in decryption_dict:
            if word.startswith(value):
                decrypted_word += decryption_dict[value]
                word = word[len(value):]
                found_match = True
        if not found_match:
            # Если не найдено совпадение, это, возможно, пробел между словами
            decrypted_word += ' '
            word = word[3:]  # Удаляем пробел из входной строки
    return decrypted_word


def main():
    while True:
        print("1. Шифровать")
        print("2. Дешифровать")
        print("3. Выход")
        print("Создано Виталием Корабельниковым, НМТ-313929, версия 1.0.0, 2024 год")

        choice = input("Выберите действие: ")

        if choice == '1':
            word_to_encrypt = input("Введите слово для шифрования: ")
            encrypted_word = encrypt(word_to_encrypt)
            print("Шифрованное слово:", encrypted_word)
        elif choice == '2':
            word_to_decrypt = input("Введите слово для дешифрования: ")
            decrypted_word = decrypt(word_to_decrypt)
            print("Дешифрованное слово:", decrypted_word)
        elif choice == '3':
            print("До свидания!")
            break
        else:
            print("Некорректный ввод. Пожалуйста, выберите 1, 2 или 3.")


if __name__ == "__main__":
    main()